{% extends 'base.html' %}

{% block control_tab %}
    <a id="control" class="nav-link active" href="#" onclick="navigateToPage('control')">Control</a>
{% endblock %}

{% block sidebar%}
    <div class="dropdown">
        <div class="btn-group" role="group" aria-label="Button group with nested dropdown">  
            <div class="btn-group" role="group">
                <button id="destination-picker" type="button" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Set Destination
                </button>
                <div class="dropdown-menu" aria-labelledby="btnGroupDrop1">
                    {% for waypoint_name in waypoints.keys(): %}
                    <a class="dropdown-item" href="#" onclick="updatePickerText('{{waypoint_name}}')" >{{waypoint_name}}</a>
                    {% endfor %}
                </div>
            </div>
            <button id="go-button" type="button" class="btn btn-secondary"> GO </button>
        </div>
    </div>
{% endblock %}

{% block content %}
    <div id="map-container">
        <img id="live-map" src="{{ url_for('static', filename='sample_map.png') }}" alt="live map here" height="auto" width="80%"/>
    </div>
    <script>
        function updateRobotIcon() {
            console.log('Updating robot icon...');
            var mapElement = document.getElementById("live-map");
            console.log(mapElement.getBoundingClientRect());
        }
        updateRobotIcon()

        function updatePickerText(selectedDestination) {
            $('#destination-picker').text(selectedDestination); 
        }
    </script>
{% endblock %}